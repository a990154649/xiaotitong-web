(function(){let e=document.createElement(`link`).relList;if(e&&e.supports&&e.supports(`modulepreload`))return;for(let e of document.querySelectorAll(`link[rel="modulepreload"]`))n(e);new MutationObserver(e=>{for(let t of e)if(t.type===`childList`)for(let e of t.addedNodes)e.tagName===`LINK`&&e.rel===`modulepreload`&&n(e)}).observe(document,{childList:!0,subtree:!0});function t(e){let t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin===`use-credentials`?t.credentials=`include`:e.crossOrigin===`anonymous`?t.credentials=`omit`:t.credentials=`same-origin`,t}function n(e){if(e.ep)return;e.ep=!0;let n=t(e);fetch(e.href,n)}})();var e={weibao:`https://gist.githubusercontent.com/yourusername/weibao_gist_id/raw/version/weibaozhongji.txt`,jiankong:`https://gist.githubusercontent.com/yourusername/jiankong_gist_id/raw/version/jiankongzhongji.txt`},t={weibao:`weibaozhongji.txt`,jiankong:`jiankongzhongji.txt`},n=document.getElementById(`updateDialog`),r=document.getElementById(`loading`),i=document.getElementById(`message`);function a(e,t){i&&(i.textContent=e,i.className=`message ${t}`,i.style.display=`block`,setTimeout(()=>{i.style.display=`none`},3e3))}function o(e){r&&(r.style.display=e?`block`:`none`)}function s(){n&&(n.style.display=`flex`)}function c(){n&&(n.style.display=`none`)}function l(e){let n=t[e];fetch(`/${n}`).then(t=>{t.ok?a(`${e===`weibao`?`消防维保`:`监控岗`}中级题库加载中...`,`success`):(a(`题库文件不存在，请先更新题库`,`error`),s())}).catch(()=>{a(`无法访问题库文件，请先更新题库`,`error`),s()})}async function u(t){o(!0),c();try{let n=e[t],r=await fetch(n);if(!r.ok)throw Error(`HTTP error! status: ${r.status}`);let i=await r.text();localStorage.setItem(`exam_${t}`,i),a(`${t===`weibao`?`消防维保`:`监控岗`}中级题库更新成功！`,`success`)}catch(e){console.error(`更新题库失败:`,e),a(`更新题库失败：${e instanceof Error?e.message:`网络错误`}`,`error`)}finally{o(!1)}}function d(){let e=document.createElement(`input`);e.type=`file`,e.accept=`.txt`,e.onchange=e=>{let t=e.target.files?.[0];if(t){let e=new FileReader;e.onload=()=>{a(`本地题库导入成功！`,`success`)},e.readAsText(t)}},e.click()}window.openUpdateDialog=s,window.closeUpdateDialog=c,window.selectExam=l,window.updateExam=u,window.importLocalExam=d,console.log(`消题通应用初始化完成`);